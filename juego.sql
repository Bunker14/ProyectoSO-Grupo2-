DROP DATABASE IF EXISTS juego;
CREATE DATABASE juego;

USE juego;

CREATE TABLE JUGADOR(
	NICK VARCHAR(30) NOT NULL,
	PWD VARCHAR(30) NOT NULL,
	PRIMARY KEY (NICK)	 
)Engine=InnoDB;


CREATE TABLE PARTIDA(
	ID INT NOT NULL,
	GANADOR VARCHAR(30) NOT NULL,
	FECHA VARCHAR(30) NOT NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (GANADOR) REFERENCES JUGADOR (NICK)
)Engine=InnoDB;


CREATE TABLE PUNTUACIONES(
	PLAYER VARCHAR(30),
	IDPARTIDA INT,	
	PUNTOS INT,
	FOREIGN KEY (PLAYER) REFERENCES JUGADOR (NICK),
	FOREIGN KEY (IDPARTIDA) REFERENCES PARTIDA (ID)
)Engine=InnoDB;


INSERT INTO JUGADOR VALUES ('marc10','qwerty123');
INSERT INTO JUGADOR VALUES ('admin','admin');
INSERT INTO JUGADOR VALUES ('arnau10','qwerty123');
INSERT INTO JUGADOR VALUES ('bryan55','qwerty123');
INSERT INTO JUGADOR VALUES ('anna9','qwerty123');
INSERT INTO JUGADOR VALUES ('david333','qwerty123');
INSERT INTO JUGADOR VALUES ('albert22','qwerty123');
INSERT INTO JUGADOR VALUES ('toni1','qwerty123');
INSERT INTO JUGADOR VALUES ('victor99','qwerty123');


INSERT INTO PARTIDA VALUES (0,'marc10','13/03/2020');
INSERT INTO PARTIDA VALUES (1,'arnau10','13/03/2020');
INSERT INTO PARTIDA VALUES (2,'bryan55','13/03/2020');
INSERT INTO PARTIDA VALUES (3,'marc10','13/03/2020');
INSERT INTO PARTIDA VALUES (4,'david333','13/03/2020');
INSERT INTO PARTIDA VALUES (5,'marc10','13/03/2020');
INSERT INTO PARTIDA VALUES (6,'albert22','13/03/2020');
INSERT INTO PARTIDA VALUES (7,'toni1','13/03/2020');
INSERT INTO PARTIDA VALUES (8,'anna9','13/03/2020');
INSERT INTO PARTIDA VALUES (9,'arnau10','13/03/2020');
INSERT INTO PARTIDA VALUES (10,'marc10','13/03/2020');
INSERT INTO PARTIDA VALUES (11,'marc10','13/03/2020');
INSERT INTO PARTIDA VALUES (12,'marc10','13/03/2020');
INSERT INTO PARTIDA VALUES (13,'victor99','13/03/2020');
INSERT INTO PARTIDA VALUES (14,'anna9','13/03/2020');
INSERT INTO PARTIDA VALUES (15,'marc10','13/03/2020');

INSERT INTO PUNTUACIONES VALUES ('marc10',0,70);
INSERT INTO PUNTUACIONES VALUES ('arnau10',0,20);
INSERT INTO PUNTUACIONES VALUES ('bryan55',0,10);
INSERT INTO PUNTUACIONES VALUES ('anna9',0,20);
INSERT INTO PUNTUACIONES VALUES ('david333',0,10);
INSERT INTO PUNTUACIONES VALUES ('albert22',0,10);
INSERT INTO PUNTUACIONES VALUES ('toni1',0,10);
INSERT INTO PUNTUACIONES VALUES ('victor99',0,10);


SELECT * FROM PUNTUACIONES;
SELECT * FROM JUGADOR;
SELECT JUGADOR.PWD FROM (JUGADOR) WHERE JUGADOR.NICK = 'marc10';
SELECT PARTIDA.ID FROM (JUGADOR, PARTIDA) WHERE PARTIDA.GANADOR = JUGADOR.NICK AND JUGADOR.NICK = 'marc10';

